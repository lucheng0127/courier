## 1. 配置和模型管理
- [ ] 1.1 扩展配置结构，添加模型配置（支持环境变量）
- [ ] 1.2 实现模型配置加载和验证
- [ ] 1.3 创建模型服务（查询可用模型列表）

## 2. API Key 认证中间件
- [ ] 2.1 实现 API Key 认证中间件
- [ ] 2.2 实现用户信息上下文管理
- [ ] 2.3 更新 API Key 的 last_used_at 时间

## 3. 请求日志模型和仓储
- [ ] 3.1 定义 RequestLog 数据模型
- [ ] 3.2 实现 RequestLogRepository 接口和 SQLite 实现
- [ ] 3.3 创建数据库迁移

## 4. 上游模型客户端
- [ ] 4.1 定义 ModelClient 接口
- [ ] 4.2 实现通用的 HTTP 模型客户端（支持 OpenAI 兼容格式）
- [ ] 4.3 实现非流式对话请求
- [ ] 4.4 实现流式对话请求（SSE）
- [ ] 4.5 实现请求超时和取消

## 5. 模型对话服务
- [ ] 5.1 定义 ModelService 接口
- [ ] 5.2 实现非流式对话处理
- [ ] 5.3 实现流式对话处理
- [ ] 5.4 实现请求日志记录（异步）
- [ ] 5.5 实现 Token 统计

## 6. HTTP 层实现
- [ ] 6.1 实现模型列表 Handler
- [ ] 6.2 实现模型对话 Handler（支持流式）
- [ ] 6.3 定义请求和响应 DTO

## 7. 路由和中间件集成
- [ ] 7.1 更新路由配置，添加模型相关路由
- [ ] 7.2 应用 API Key 认证中间件到需要认证的路由
- [ ] 7.3 更新 main.go 的依赖注入

## 8. 验证和测试
- [ ] 8.1 验证模型列表 API
- [ ] 8.2 验证非流式对话功能
- [ ] 8.3 验证流式对话功能
- [ ] 8.4 验证 API Key 认证
- [ ] 8.5 验证请求日志记录
